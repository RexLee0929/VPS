import re

def chinese_to_arabic(chinese_num):
    chinese_map = {
        '一': 1, '二': 2, '三': 3, '四': 4, '五': 5, '六': 6, '七': 7, '八': 8, '九': 9, '十': 10,
        '十一': 11, '十二': 12, '十三': 13, '十四': 14, '十五': 15, '十六': 16, '十七': 17, '十八': 18,
        '十九': 19, '二十': 20, '二十一': 21, '二十二': 22, '二十三': 23, '二十四': 24, '二十五': 25,
        '二十六': 26, '二十七': 27, '二十八': 28, '二十九': 29, '三十': 30, '三十一': 31, '三十二': 32,
        '三十三': 33, '三十四': 34, '三十五': 35, '三十六': 36, '三十七': 37, '三十八': 38, '三十九': 39,
        '四十': 40, '四十一': 41, '四十二': 42, '四十三': 43, '四十四': 44, '四十五': 45, '四十六': 46,
        '四十七': 47, '四十八': 48, '四十九': 49, '五十': 50, '五十一': 51, '五十二': 52, '五十三': 53,
        '五十四': 54, '五十五': 55, '五十六': 56, '五十七': 57, '五十八': 58, '五十九': 59, '六十': 60,
        '六十一': 61, '六十二': 62, '六十三': 63, '六十四': 64, '六十五': 65, '六十六': 66, '六十七': 67,
        '六十八': 68, '六十九': 69, '七十': 70, '七十一': 71, '七十二': 72, '七十三': 73, '七十四': 74,
        '七十五': 75, '七十六': 76, '七十七': 77, '七十八': 78, '七十九': 79, '八十': 80, '八十一': 81,
        '八十二': 82, '八十三': 83, '八十四': 84, '八十五': 85, '八十六': 86, '八十七': 87, '八十八': 88,
        '八十九': 89, '九十': 90, '九十一': 91, '九十二': 92, '九十三': 93, '九十四': 94, '九十五': 95,
        '九十六': 96, '九十七': 97, '九十八': 98, '九十九': 99, '一百': 100, '一百零一': 101, '一百零二': 102,
        '一百零三': 103, '一百零四': 104, '一百零五': 105, '一百零六': 106, '一百零七': 107, '一百零八': 108, '一百零九': 109, '一百一十': 110, '一百一十一': 111, '一百一十二': 112, '一百一十三': 113, '一百一十四': 114, '一百一十五': 115, '一百一十六': 116, '一百一十七': 117, '一百一十八': 118, '一百一十九': 119, '一百二十': 120, '一百二十一': 121, '一百二十二': 122, '一百二十三': 123, '一百二十四': 124, '一百二十五': 125, '一百二十六': 126, '一百二十七': 127, '一百二十八': 128, '一百二十九': 129, '一百三十': 130, '一百三十一': 131, '一百三十二': 132, '一百三十三': 133, '一百三十四': 134, '一百三十五': 135, '一百三十六': 136, '一百三十七': 137, '一百三十八': 138, '一百三十九': 139, '一百四十': 140, '一百四十一': 141, '一百四十二': 142, '一百四十三': 143, '一百四十四': 144, '一百四十五': 145, '一百四十六': 146, '一百四十七': 147, '一百四十八': 148, '一百四十九': 149, '一百五十': 150, '一百五十一': 151, '一百五十二': 152, '一百五十三': 153, '一百五十四': 154, '一百五十五': 155, '一百五十六': 156, '一百五十七': 157, '一百五十八': 158, '一百五十九': 159, '一百六十': 160, '一百六十一': 161, '一百六十二': 162, '一百六十三': 163, '一百六十四': 164, '一百六十五': 165, '一百六十六': 166, '一百六十七': 167, '一百六十八': 168, '一百六十九': 169, '一百七十': 170, '一百七十一': 171, '一百七十二': 172, '一百七十三': 173, '一百七十四': 174, '一百七十五': 175, '一百七十六': 176, '一百七十七': 177, '一百七十八': 178, '一百七十九': 179, '一百八十': 180, '一百八十一': 181, '一百八十二': 182, '一百八十三': 183, '一百八十四': 184, '一百八十五': 185, '一百八十六': 186, '一百八十七': 187, '一百八十八': 188, '一百八十九': 189, '一百九十': 190, '一百九十一': 191, '一百九十二': 192, '一百九十三': 193, '一百九十四': 194, '一百九十五': 195, '一百九十六': 196, '一百九十七': 197, '一百九十八': 198, '一百九十九': 199, '二百': 200
    }

    arabic_num = 0
    units = re.findall(r'[一二三四五六七八九十百]+', chinese_num)
    for unit in units:
        arabic_num += chinese_map[unit]
    return arabic_num

filename = r'C:\Users\lunto\Desktop\1.txt'  # 替换为实际的文件名
with open(filename, 'r', encoding='utf-8') as file:
    content = file.read()

# 修改后的正则表达式
pattern = r'(?<=\s|[\r\n])第([一二三四五六七八九十百零]+)[章回](?=\s|[\r\n])'
matches = re.findall(pattern, content)
for match in matches:
    arabic_num = chinese_to_arabic(match)
    content = content.replace(f'第{match}章', f'第{arabic_num}章').replace(f'第{match}回', f'第{arabic_num}回')

with open(filename, 'w', encoding='utf-8') as file:
    file.write(content)